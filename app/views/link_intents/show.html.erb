<%# Asegúrate de que esta etiqueta de script esté en la página donde quieres usar el widget. %>
<script src="https://js.fintoc.com/v1/"></script>

<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOMContentLoaded event triggered');

    const widgetToken = '<%= @link_intent.widget_token %>';
    const publicKey = 'pk_test_xwUGiHD3-zsftKEioAvCGjAk6qQrTS65';
    const holderType = '<%= @link_intent.holder_type %>';
    const product = '<%= @link_intent.product %>';

    console.log('widgetToken:', widgetToken);
    console.log('publicKey:', publicKey);
    console.log('holderType:', holderType);
    console.log('product:', product);

    const widget = Fintoc.create({
      widgetToken: widgetToken,
      publicKey: publicKey,
      holderType: holderType,
      product: product,
      onSuccess: (linkIntent) => {
        console.log('Link Intent Finished');
        console.log('linkIntent:', linkIntent);
      },
      onExit: () => {
        console.log('Link Intent Failed or Canceled');
      },
    });

    console.log('Fintoc widget created:', widget);

    widget.open();

    console.log('Fintoc widget opened');
  });
</script>

